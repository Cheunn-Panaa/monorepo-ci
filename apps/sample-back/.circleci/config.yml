# Use the latest 2.1 version of CircleCI pipeline process engine.
# See: https://circleci.com/docs/configuration-reference
version: 2.1

jobs:
  build_toto:
    docker:
    - image: cimg/base:2023.06
    steps:
    - checkout
    - run: "echo build"
  deploy:
    docker:
      - image: cimg/base:2023.06

    parameters:
      message:
        type: string
    steps:
      - checkout
      - run: echo deploy << parameters.message >>

# Orchestrate jobs using workflows
# See: https://circleci.com/docs/configuration-reference/#workflows
workflows:
  build_toto:
    jobs:
    - build_toto
    - deploy:
        type: approval
        requires:
        - build_toto
        matrix:
          parameters:
            message: ["dev", "test1", "test2", "test3", "rct", "prd"]
